# 植物大战僵尸弹幕驱动程序

## 1. 介绍

&ensp;&ensp;&ensp;&ensp;这是一款基于弹幕互动模式的《植物大战僵尸》游戏，在这里，僵尸和植物种植全部依靠**弹幕指令**进行放置。除了进行简单的单位放置以外，能够使用各式各样的技能也是该项目的主要特色。

## 2.互动规则

&ensp;&ensp;&ensp;&ensp;用户进入直播间后，需要先加入植物或者僵尸**阵营**，双方不可调用对方接口或技能，另外，部分技能可能会影响游戏公平性，所以，当玩家调用这些技能时，需要拥有相应的**积分**，积分可通过点赞、送礼或者首次关注获得。（主播控制台也可以启用/关闭积分，阵营等限制）详情如下：

+ 首次关注 = `5000`积分
+ 送礼 = `抖币价格*100`积分
+ 点赞 = `1:1` 10连赞起开始结算(官方服务器每日可能有点赞数限制)

tip:积分限制只是为了防止大流量下频繁调用特殊效果导致游戏平衡性受到影响，或者频繁修改内存导致出现不可预知的问题，观众少的情况下我会关闭积分开关

## 3 对象列表

### 僵尸枚举(包括所需积分和可用性)
```c#
    // 僵尸枚举
    public enum Zombies
    {
        普通僵尸 = 0,
        旗帜僵尸 = 1,
        路障僵尸 = 2,
        撑杆僵尸 = 3,
        铁桶僵尸 = 4,
        读报僵尸 = 5,
        铁门僵尸 = 6,
        橄榄僵尸 = 7,
        舞王僵尸 = 8,
        伴舞僵尸 = 9,
        鸭子僵尸 = 10,
        潜水僵尸 = 11,
        冰车僵尸 = 12,//需100积分
        雪橇僵尸 = 13,
        海豚僵尸 = 14,
        小丑僵尸 = 15,//需50积分
        气球僵尸 = 16,
        矿工僵尸 = 17,
        跳跳僵尸 = 18,
        雪人僵尸 = 19,
        飞贼僵尸 = 20,//需200积分
        扶梯僵尸 = 21,
        投篮僵尸 = 22,
        白眼僵尸 = 23,
        小鬼僵尸 = 24,
        僵王博士 = 25,//需5000积分
        豌豆僵尸 = 26,
        坚果僵尸 = 27,
        辣椒僵尸 = 28,//需200积分
        机枪僵尸 = 29,//需100积分
        倭瓜僵尸 = 30,
        高墙僵尸 = 31,
        红眼僵尸 = 32//需200积分
    }    
```
### 植物枚举
```c#
    // 植物枚举
    public enum Plants
    {
        豌豆射手 = 0,
        向日葵 = 1,
        樱桃炸弹 = 2,//需100积分
        坚果 = 3,
        土豆雷 = 4,
        寒冰射手 = 5,
        大嘴花 = 6,
        双发射手 = 7,
        小喷菇 = 8,
        阳光菇 = 9,
        大喷菇 = 10,
        墓碑吞噬者 = 11,
        魅惑菇 = 12,
        胆小菇 = 13,
        寒冰菇 = 14,//需200积分
        毁灭菇 = 15,//需200积分
        睡莲 = 16,
        倭瓜 = 17,
        三线射手 = 18,
        缠绕海草 = 19,
        火爆辣椒 = 20,//需200积分
        地刺 = 21,
        火炬树桩 = 22,
        高坚果 = 23,
        海蘑菇 = 24,
        路灯花 = 25,
        仙人掌 = 26,
        三叶草 = 27,
        裂荚射手 = 28,
        杨桃 = 29,
        南瓜头 = 30,
        磁力菇 = 31,
        卷心菜投手 = 32,
        花盆 = 33, //禁用
        玉米投手 = 34,
        咖啡豆 = 35,//禁用
        大蒜 = 36,
        叶子保护伞 = 37,
        金盏花 = 38,//禁用
        西瓜投手 = 39,
        机枪射手 = 40,
        双子向日葵 = 41,
        忧郁蘑菇 = 42,
        香蒲 = 43,
        冰瓜 = 44,
        吸金磁 = 45,
        地刺王 = 46,
        玉米加农炮 = 47,
        模仿者 = 48,//禁用
        爆炸坚果 = 49,//禁用,因为不会爆炸
        巨大坚果 = 50
    }
```
## 4.弹幕指令

### 植物阵营指令
+ 说明:命令有若干种形式，可以使用中文或者英文，甚至混合，使用时注意空格间隙

+ 分隔符:  `/,，.`

  1. 加入阵营

     ```tex
     (join|加入阵营) <(plant|植物)|(zombie|僵尸)>
     示例: join plant
     ```
  
  2. 查询账号状态
  
     ```tex
     (query|查询)  //可获取账号积分，所在阵营信息
     ```
  
  3. 种植物
  
     + 命令格式
  
     ``` tex
     (plt|种植物) <(植物ID|植物名称)> <行{分隔符}列>
     ```
  
     + 说明
  
     例如: `plt 大嘴花 1/1` ， `种植物 大嘴花 1,1` ， `plt 6 1.1`  它们都是同一种效果——在第1行第1列的位置种植大嘴花，后面所有命令都可以参照这种形式
  
     
  
  4. 发射场上所有加农炮 
  
     ```tex
     plt paoall <行{分隔符}列>
     ```
  
  5. 放置僵尸
  
     + 放置一般僵尸
  
        ``` tex
        (zom|放僵尸) <僵尸ID|名称> <行>
        ```
  
     + 如果是飞贼僵尸
  
        ``` tex
        (zom|放僵尸) <僵尸ID|名称> <行{分隔符}列>
        说明:飞贼僵尸可以偷取场上某个坐标的植物，所以需要指定具体列。这种方式也可以放置一般僵尸，只不过列参数会被忽略
        ```
  
  6. 释放技能
  
     + 有参数技能
  
       + 僵尸技能-全军出击 [冷却:10s,无需积分]
  
       ``` tex
       skill 全军出击 [<僵尸ID|名称>.]...
       介绍:随机生成3列僵尸加入战场，（固定僵尸类型+参数指定类型）然后根据权重进行生成，
       固定僵尸包括:普通僵尸，路障僵尸，铁桶僵尸，铁门僵尸
       命令示例:
       skill 全军出击 路障僵尸.雪人僵尸.红眼僵尸  //请特别注意分隔符
       ```
	     + 植物技能-僵尸间谍 [500积分]
	
	     ``` tex
	     skill 僵尸间谍 <僵尸ID|名称>
	     介绍:生成3排指定类型的进入魅惑状态的僵尸在我方向敌方僵尸发起攻击。
	     注意:冰车僵尸,雪橇僵尸,飞贼僵尸,投篮僵尸,僵王博士,辣椒僵尸,机枪僵尸,倭瓜僵尸 无法指定，因为它们可能会产生副作用。除此之外需要注意的是，有一部分僵尸无法攻击僵尸
	     命令示例:
	     skill 僵尸间谍 普通僵尸
	     ```
	
	   + 无参数技能
	
	     ``` tex
	     命令格式: skill <技能名称>
	     ```
	
	     + 植物技能
	       1. **樱桃榨汁机** [600积分]：随机在场上生成10个樱桃炸弹
	       2. **世界和平** [1000积分]：随机在场上生成6个毁灭菇，爆炸点的植物也会被清除
	       3. **外焦里嫩** [1000积分]：每行生成一个火爆辣椒
	       4. **肾上腺素**(限时技能) [冷却30S，300积分]：所有植物攻速加快，这对投掷类型植物非常有效。持续30秒
	       5. **无敌时间**(限时技能) [冷却10s，1000积分]：所有植物进入免伤状态，持续10秒
	       6. **烫嘴豌豆**(限时技能) [冷却30s，100积分]：豌豆子弹进入火焰附着状态，持续30秒
	     + 僵尸技能
	       1. **火力压制** [600积分]：生成三列机枪僵尸
	       2. **大丰收** [1000积分]：生成飞贼僵尸随机抱走场上5株植物
	       3. **燎原之火** [1000积分]：生成一列辣椒僵尸
	       4. **定时炸弹** [1000积分]：生成4列小丑僵尸
	       5. **安全感** [300积分]：生成3列高坚果僵尸在第10列

## 5.补充说明

### 游戏内部分机制有所调整

1. 毁灭蘑菇爆炸不留弹坑
2. 冰车僵尸不磨冰道
3. 蘑菇不会睡眠  
4. 加农炮无冷却            
5. 大嘴花无冷却
6. 游戏内不会自动刷怪

### 结语

项目属于兴趣研发，前期可能会存在一些bug，欢迎私信提出。后期会考虑开源项目
